# ğŸ‹ï¸â€â™‚ï¸ Project5K â€” Fitness Accountability Discord Bot

**Project5K** is a Python-based Discord bot that helps users stay consistent with their fitness goals by:

- Logging workout minutes via slash commands (`/log`)
- Tracking daily streaks automatically
- Sending motivational messages generated by a local **TinyLlama** LLM (fast, runs on Apple Silicon/CPU)
- Storing logs in Firebase Firestore for persistence
- Allowing users to ask any question or get motivation via `/ask`

This project runs fully **locally**, with no external LLM API dependency, and is ideal for communities who value privacy and ownership.

---

## ğŸš€ Features

- `/log <minutes>` â€“ Log your daily workout (with autocomplete for common durations)
- `/ask <prompt>` â€“ Ask the local LLM for motivation, tips, or any question (with autocomplete for example prompts)
- ğŸ’¬ Local TinyLlama LLM generates personalized motivation and answers
- ğŸ”¥ 7-day streak tracking with automatic DM alerts
- ğŸ§  Firebase Firestore storage for logs
- ğŸ§© Easily extendable with leaderboards, summaries, and OpenAI fallback

---

## ğŸ§° Tech Stack

- [Python 3.10+](https://www.python.org/)
- [discord.py](https://discordpy.readthedocs.io/) (with slash/app commands)
- [firebase-admin](https://firebase.google.com/docs/admin/setup)
- [llama-cpp-python](https://github.com/abetlen/llama-cpp-python) (TinyLlama backend, Metal/CPU optimized)
- [APScheduler](https://apscheduler.readthedocs.io/)
- [python-dotenv](https://pypi.org/project/python-dotenv/)

---

## ğŸ“¦ Setup Instructions

### 1. Clone the Repository

```bash
git clone https://github.com/your-username/project5k-discord-bot.git
cd project5k-discord-bot
```

### 2. Install Dependencies

> Ensure you have Python 3.10+ and virtualenv installed

```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -r requirements.txt
```

To install `llama-cpp-python` with Metal acceleration (macOS M1/M2/M3):

```bash
CMAKE_ARGS="-DLLAMA_METAL=on" pip install llama-cpp-python --no-binary llama-cpp-python
```

---

### 3. Prepare Firebase

1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Create a project â†’ Enable **Firestore Database**
3. Enable **Anonymous Authentication** under **Authentication**
4. Go to **Settings > Service accounts > Generate new private key**
5. Save it as `serviceAccountKey.json` in your project root

---

### 4. Create Your `.env` File

```env
DISCORD_BOT_TOKEN=your_discord_bot_token_here
```

---

### 5. Download the TinyLlama Model

From Hugging Face:  
ğŸ”— [TheBloke/TinyLlama-1.1B-Chat-v1.0-GGUF](https://huggingface.co/TheBloke/TinyLlama-1.1B-Chat-v1.0-GGUF)

Download the file:  
`tinyllama-1.1b-chat-v1.0.Q4_K_M.gguf`  
Place it in your project directory.

---

### 6. Run the Bot

```bash
python project5k_bot.py
```

---

## ğŸ’¡ Usage

### Log a Workout

Type `/log` in Discord and select a duration (autocomplete will suggest common values):

```
/log 30
```

The bot will:

- Save your log in Firebase
- Echo your log in the channel
- Send a motivational message using TinyLlama

### Ask for Motivation or Tips

Type `/ask` in Discord and enter your question or prompt (autocomplete will suggest examples):

```
/ask How do I stay motivated?
```

The bot will:

- Echo your question in the channel
- Reply with a motivational or informative answer from TinyLlama

### Daily Motivation

- Every day at 7:00 AM, the bot checks all logs
- If youâ€™ve logged workouts for 3+ consecutive days, it sends a custom DM!

---

## ğŸ“ File Structure

```
project5k-bot/
â”œâ”€â”€ project5k_bot.py
â”œâ”€â”€ serviceAccountKey.json
â”œâ”€â”€ .env
â”œâ”€â”€ tinyllama-1.1b-chat-v1.0.Q4_K_M.gguf
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

## ğŸ” Security

- DO NOT commit `.env` or `serviceAccountKey.json` to GitHub
- Add them to `.gitignore`

```gitignore
.env
serviceAccountKey.json
*.gguf
```

---

## ğŸ§© Roadmap

- [ ] `/streak` command to view current streak
- [ ] Weekly progress summaries
- [ ] OpenAI fallback if local model unavailable
- [ ] Leaderboard support (most consistent users)

---

## ğŸ§  Credits

- [discord.py](https://github.com/Rapptz/discord.py)
- [llama-cpp-python](https://github.com/abetlen/llama-cpp-python)
- [TheBloke's GGUF Models](https://huggingface.co/TheBloke)
- [Firebase Admin SDK](https://firebase.google.com/docs/admin/setup)

---

## ğŸ“œ License

This project is licensed under the MIT License.

---

## ğŸ’¬ Questions?

Feel free to open an issue or reach out via GitHub discussions. Contributions are welcome!
